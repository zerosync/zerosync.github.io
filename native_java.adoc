---
layout: default
title: Java JNI
subtitle: Print example 
---

:source-highlighter: prettify 

== How to call a C function from Java?

This is example illustrates how to call a native C function from Java. This is most likely the approach to implement the "Core library".

.HelloJNI.java
[source, java]
----
public class Hello.JNI {
  static {
    System.loadLibrary("hello");
  }
  
  private native void sayHello();
  
  public static void main(String[] args) {
    new HelloJNI().sayHello();
  }
}
----

The first step is to add a method prototype with the *native* keyword. Which can be called like any other Java method. On this class we invoke the java util `javah -jni HelloJNI.java` to generate the HelloJNI.h header file.

.HelloJNI.h
[source, c]
----
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class HelloJNI */

#ifndef _Included_HelloJNI
#define _Included_HelloJNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     HelloJNI
 * Method:    sayHello
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_HelloJNI_sayHello
  (JNIEnv *, jobject);

#ifdef __cpluspluss
}
#endif
#endif
----

With the header file inplace we can go ahead and implement the function from the header in C.

.HelloJNI.c
[source, c]
----
#include <jni.h>
#include <stdio.h>
#include "HelloJNI.h"

JNIEXPORT void JNICALL Java_HelloJNI_sayHello(JNIEnv *env, jobject thisOBJ) {
  printf("Hello World!\n");
  return;
}
----
