---
layout: default
title: Java JNI
subtitle: Example 
---

:source-highlighter: prettify 

== How to call a C function from Java?

This is a Hello World example on how a Java participant might implement the core library calls. 

.HelloJNI.java
[source, java]
----
public class Hello.JNI {
  static {
    System.loadLibrary("hello");
  }
  
  private native void sayHello();
  
  public static void main(String[] args) {
    new HelloJNI().sayHello();
  }
}
----

The first step is the add a method prototype with the *native* keyword. Once this is done the header file for c can be generated using the java helper class _javah -jni_.

.HelloJNI.h
[source, c]
----
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class HelloJNI */

#ifndef _Included_HelloJNI
#define _Included_HelloJNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     HelloJNI
 * Method:    sayHello
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_HelloJNI_sayHello
  (JNIEnv *, jobject);

#ifdef __cpluspluss
}
#endif
#endif
----

.HelloJNI.c
[source, c]
----
#include <jni.h>
#include <stdio.h>
#include "HelloJNI.h"

JNIEXPORT void JNICALL Java_HelloJNI_sayHello(JNIEnv *env, jobject thisOBJ) {
  printf("Hello World!\n");
  return;
}
----

At last were implementing the C function.
